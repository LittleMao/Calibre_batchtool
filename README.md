# 图书管理与元数据编辑系统

基于 Python 和 Calibre 核心 API 开发的高效率图书库管理工具，提供直观的 Windows GUI 界面。

## 🌟 核心特性

- 🚀 **极致性能优化**：
  - **万级书库秒开**：利用 Calibre 原生索引排序与数据库级搜索，即使管理 100,000+ 本书也毫无压力。
  - **异步批量更新**：后台线程执行批量修改，界面始终保持响应，并实时显示百分比进度。
  - **多重缓存机制**：ID 索引、搜索结果、封面图标全方位缓存，翻页滚动极致丝滑。
  - **智能搜索防抖**：300ms 延迟触发，打字时不再卡顿。
- 📅 **智能管理与体验**：
  - **自动排序**：图书按加入时间倒序排列，最新入库一目了然。
  - **分页记忆**：编辑图书保存后自动保持当前页码，杜绝频繁翻页。
- 📑 **高效列表布局**：
  - **分页系统**：每页显示 50 本书，支持极速翻页。
  - **批量操作**：内置勾选框，支持批量元数据修改和删除。
- 🔍 **多维智能过滤**：
  - **复合筛选**：关键词、语言、标签的多维度交叉搜索。
  - **精确交集 (AND)**：多选标签时，系统仅展示**同时具备**所有选定标签的图书。
  - **查缺补漏**：一键筛选 `(空)` 值查找缺失元数据的书籍；筛选 `非法标签` 识别不在 `tags.txt` 规范内的项。
  - **过滤看板**：底部实时文字显示当前所有生效的过滤条件，状态清晰。
- ✏️ **深度编辑逻辑**：
  - **快捷编辑**：双击列表行（除封面外）即开即编。
  - **规范化标签**：集成基于 `tags.txt` 的多选复选框下拉列表。
  - **元数据校验**：全面支持书名、作者、出版社、ISO 639-2 语言代码及 YYYY-MM-DD 日期的编辑。
- �️ **删除与回收站**：
  - **批量删除**：勾选后点击"删除选中"，删除前需二次确认。
  - **回收站浏览**：通过菜单"回收站 > 浏览回收站"查看已删除书籍，支持恢复到主库。
  - **清空回收站**：永久删除回收站内容，操作前需再次确认。
- �🖼️ **封面系统**：列表显示缩略图，点击瞬间弹出高清原图。
- 📁 **无缝库切换**：支持在应用内直接通过菜单切换不同的 Calibre 图书库。
- 🌍 **多语言支持**：界面支持实时切换，默认提供中、英双语环境。

## 🚀 快速启动

本系统深度集成 Calibre 环境，请确保使用 Calibre 官方版本运行：

```powershell
# 运行 GUI 界面
& 'C:\Program Files\Calibre2\calibre-debug.exe' -e gui.py
```

## 🛠️ 配置说明

### 界面语言 (langs.ini)
系统通过 `langs.ini` 加载所有 UI 文本。
- **切换语言**：在程序的"语言 (Language)"菜单中直接选择即可。
- **自定义描述**：你可以编辑 `langs.ini` 里的键值对来修改按钮或标签的文字。
- **扩展语种**：在 `langs.ini` 中新增一个段落（如 `[fr_FR]`），并补齐翻译条目，程序会自动检测并加载该语种。

### 标签规范 (tags.txt)
在程序同目录下创建 `tags.txt`，每行定义一个"标准标签"。系统将以此作为多选编辑的预选项，也是"非法标签"筛选的判定基准。

## ⚠️ 注意事项

- **数据安全**：修改会直接同步至 Calibre 数据库。删除的书籍会先移入回收站，可随时恢复。
- **日期规范**：保存日期请遵循 `YYYY-MM-DD` 格式。
- **交互细节**：双击封面为大图预览，双击其他区域为编辑。
- **回收站路径**：已删除的书籍存储在图书库目录下的 `.caltrash` 文件夹中。
